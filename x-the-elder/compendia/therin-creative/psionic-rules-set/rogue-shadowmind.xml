<?xml version="1.0" encoding="utf-8" ?>
<elements>
    <info>
        <name>Shadowmind Roguish Archetype</name>
        <update version="0.0.2">
            <file name="rogue-shadowmind.xml" url="https://raw.githubusercontent.com/chris-velox/aurora-elements/master/x-the-elder/compendia/therin-creative/psionic-rules-set/rogue-shadowmind.xml" />
        </update>
    </info>
    
    <element name="Shadowmind" type="Archetype" source="Therin Creative’s Psionic Rules Set" id="ID_TC_PRS_ARCHETYPE_ROGUE_SHADOWMIND">
        <supports>Roguish Archetype</supports>
        <description>
            <p>Trained to traverse the web of the mind, shadowminds make for potent spies and saboteurs. They use their skills as rogues to handle the mundane, and leverage the powers of the mind to push themselves to extraordinary feats. Like a ghost, a shadowmind can slip through the most secure of bastions and vanish without a trace.</p>
            <div element="ID_TC_PRS_ARCHETYPE_FEATURE_SHADOWMIND_POWER_MANIFESTATION" />
            <div element="ID_TC_PRS_ARCHETYPE_FEATURE_SHADOWMIND_SHADOWS_OF_THE_MIND" />
            <div element="ID_TC_PRS_ARCHETYPE_FEATURE_SHADOWMIND_CLOUD_MIND" />
            <div element="ID_TC_PRS_ARCHETYPE_FEATURE_SHADOWMIND_PSIONIC_AMBUSH" />
            <div element="ID_TC_PRS_ARCHETYPE_FEATURE_SHADOWMIND_MIND_STAB" />
        </description>
        <sheet display="false" />
        <rules>
            <grant type="Archetype Feature" id="ID_TC_PRS_ARCHETYPE_FEATURE_SHADOWMIND_POWER_MANIFESTATION" level="3" />
            <grant type="Archetype Feature" id="ID_TC_PRS_ARCHETYPE_FEATURE_SHADOWMIND_SHADOWS_OF_THE_MIND" level="3" />
            <grant type="Archetype Feature" id="ID_TC_PRS_ARCHETYPE_FEATURE_SHADOWMIND_CLOUD_MIND" level="9" />
            <grant type="Archetype Feature" id="ID_TC_PRS_ARCHETYPE_FEATURE_SHADOWMIND_PSIONIC_AMBUSH" level="13" />
            <grant type="Archetype Feature" id="ID_TC_PRS_ARCHETYPE_FEATURE_SHADOWMIND_MIND_STAB" level="17" />
        </rules>
    </element>
        <element name="Power Manifestation" type="Archetype Feature" source="Therin Creative’s Psionic Rules Set" id="ID_TC_PRS_ARCHETYPE_FEATURE_SHADOWMIND_POWER_MANIFESTATION">
            <description>
                <p>Starting at 3rd level, you gain the ability to manifest psionic powers.</p>
                <p class="indent"><b><i>Powers Known.</i></b> You know one power of your choice from the shadowmind power list.</p>
                <p class="indent">The Powers Known column of the Shadowmind table shows when you learn more shadowmind powers of your choice. Unlike spell casting classes, you may not replace powers when you gain a level in this class.</p>
                <p class="indent">You may select from the following powers: apopsi, chameleon, control light, dislocation, ego whip, extrasensory perception, glimmer, harmonics, hypercognition, id insinuation, mental barrier, mind probe, mind spike, mindlink, mislead, precognition, psychic crush, psychic domination, puppetry, remote sight, speed of thought, spirit ward, telekinetic fight, telempathic projection.</p>
                <p class="indent"><b><i>Power Points.</i></b> The Shadowmind table shows how many power points you have to augment your shadowmind powers. When you manifest a power, you can expend power points to enhance your power. You can expend a number of power points no greater than one third your rogue level on a single power.</p>
                <p class="indent">You regain all expended power points when you finish a short or long rest.</p>
                <p class="indent">Psionic powers differ from spells in that powers can have different expressions when augmented by power points. These different expressions have a similar theme, but the scope and scale can change. For example, the suspension power includes expressions that can affect single targets or an area with different measures of control.</p>
                <p class="indent"><b><i>Manifesting Ability.</i></b> Intelligence is your manifesting ability for your powers.</p>
                <p class="indent">You use Intelligence whenever a power refers to your manifesting ability. In addition, you use your Intelligence modifier when setting the saving throw DC for a psion power you manifest and when making an attack roll.</p>
                <p style="text-align: center;"><b>Power save DC</b> = 8 + your proficiency bonus + your Intelligence modifier</p>
                <p style="text-align: center;"><b>Power attack modifier</b> = your proficiency bonus + your Intelligence modifier</p>
                <h5 class="caption">SHADOWMIND FEATURES</h5>
                <table>
                    <thead>
                        <tr><td>Rogue Level</td><td>Feature</td><td>Powers Known</td><td>Power Points</td></tr>
                    </thead>
                    <tr><td>3rd</td><td>Power Manifestation, Shadows of the Mind</td><td>1</td><td>1</td></tr>
                    <tr><td>4th</td><td></td><td>2</td><td>2</td></tr>
                    <tr><td>5th</td><td></td><td>2</td><td>2</td></tr>
                    <tr><td>6th</td><td></td><td>3</td><td>2</td></tr>
                    <tr><td>7th</td><td></td><td>3</td><td>4</td></tr>
                    <tr><td>8th</td><td></td><td>4</td><td>4</td></tr>
                    <tr><td>9th</td><td>Cloud Mind (1 use), Shadows of the Mind (Enhanced)</td><td>4</td><td>4</td></tr>
                    <tr><td>10th</td><td></td><td>4</td><td>6</td></tr>
                    <tr><td>11th</td><td></td><td>5</td><td>6</td></tr>
                    <tr><td>12th</td><td></td><td>5</td><td>6</td></tr>
                    <tr><td>13th</td><td>Psionic Ambush, Cloud Mind (2 uses)</td><td>5</td><td>9</td></tr>
                    <tr><td>14th</td><td></td><td>6</td><td>9</td></tr>
                    <tr><td>15th</td><td></td><td>6</td><td>9</td></tr>
                    <tr><td>16th</td><td></td><td>7</td><td>13</td></tr>
                    <tr><td>17th</td><td>Mind Stab, Cloud Mind (Mass, 3 uses)</td><td>7</td><td>13</td></tr>
                    <tr><td>18th</td><td></td><td>8</td><td>13</td></tr>
                    <tr><td>19th</td><td></td><td>8</td><td>16</td></tr>
                    <tr><td>20th</td><td></td><td>9</td><td>16</td></tr>
                </table>
            </description>
            <spellcasting name="Shadowmind" ability="Intelligence" prepare="false" allowReplace="false">
                <list>TC Shadowmind</list>
            </spellcasting>
            <sheet usage="{{psionic-power:points}} power points/Short Rest">
                <description>You have a pool of {{psionic-power:points}} to expend on psionic powers. You can expend up to {{power-points:max-spend}} points on a single power manifestation.</description>
            </sheet>
            <rules>
                <stat name="psionic-power:points" value="1" level="3" />
                <stat name="psionic-power:points" value="1" level="4" />
                <stat name="psionic-power:points" value="2" level="7" />
                <stat name="psionic-power:points" value="3" level="10" />
                <stat name="psionic-power:points" value="3" level="13" />
                <stat name="psionic-power:points" value="4" level="16" />
                <stat name="psionic-power:points" value="3" level="19" />
                <stat name="power-points:max-spend" value="1" level="3"/>
                <stat name="power-points:max-spend" value="1" level="6"/>
                <stat name="power-points:max-spend" value="1" level="9"/>
                <stat name="power-points:max-spend" value="1" level="12"/>
                <stat name="power-points:max-spend" value="1" level="15"/>
                <stat name="power-points:max-spend" value="1" level="18"/>
                <select type="Spell" name="Psionic Power, Shadowmind" supports="$(spellcasting:list)" level="3" spellcasting="Shadowmind" known="true" />
                <select type="Spell" name="Psionic Power, Shadowmind" supports="$(spellcasting:list)" level="4" spellcasting="Shadowmind" known="true" />
                <select type="Spell" name="Psionic Power, Shadowmind" supports="$(spellcasting:list)" level="6" spellcasting="Shadowmind" known="true" />
                <select type="Spell" name="Psionic Power, Shadowmind" supports="$(spellcasting:list)" level="8" spellcasting="Shadowmind" known="true" />
                <select type="Spell" name="Psionic Power, Shadowmind" supports="$(spellcasting:list)" level="11" spellcasting="Shadowmind" known="true" />
                <select type="Spell" name="Psionic Power, Shadowmind" supports="$(spellcasting:list)" level="14" spellcasting="Shadowmind" known="true" />
                <select type="Spell" name="Psionic Power, Shadowmind" supports="$(spellcasting:list)" level="16" spellcasting="Shadowmind" known="true" />
                <select type="Spell" name="Psionic Power, Shadowmind" supports="$(spellcasting:list)" level="18" spellcasting="Shadowmind" known="true" />
                <select type="Spell" name="Psionic Power, Shadowmind" supports="$(spellcasting:list)" level="20" spellcasting="Shadowmind" known="true" />
            </rules>
        </element>
        <element name="Shadows of the Mind" type="Archetype Feature" source="Therin Creative’s Psionic Rules Set" id="ID_TC_PRS_ARCHETYPE_FEATURE_SHADOWMIND_SHADOWS_OF_THE_MIND">
            <description>
                <p>At 3rd level, you add <i>shadow shape</i> to your powers known. If you already know <i>shadow shape</i>, you may choose another power from the shadowmind power list.</p>
                <p class="indent">When you reach 9th level, when you manifest <i>shadow shape</i>, you manifest it with an additional 3 power points at no cost.</p>
            </description>
            <sheet>
                <description level="9">When you manifest shadow shape, you manifest it with an additional 3 power points at no cost.</description>
            </sheet>
            <rules>
                <select type="Spell" name="Psionic Power, Shadows of the Mind" supports="TC Shadowmind" known="true" default="ID_TC_PRS_PSIONIC_POWER_SHADOW_SHAPE" />
            </rules>
        </element>
        <element name="Cloud Mind" type="Archetype Feature" source="Therin Creative’s Psionic Rules Set" id="ID_TC_PRS_ARCHETYPE_FEATURE_SHADOWMIND_CLOUD_MIND">
            <description>
                <p>When you reach 9th level, you make yourself completely undetectable to a creature by erasing all awareness of your presence from its mind. The Cloud Mind feature acts like a psionic power manifested by you, but it doesn’t expend power points. You can maintain this power for 1 minute per rogue level you have.</p>
                <p class="indent">You can use your action to target one creature within 30 feet of you that you can see. The creature must make a Wisdom saving throw against your power save DC. If this save is failed, your target is completely unaware of your presence. You are invisible and inaudible to the creature and you can’t be detected by it even through means such as blindsight, tremorsense, or truesight.</p>
                <p class="indent">The target also remains unaware of your actions, provided you don’t make any attacks or cause any obvious or directly threatening changes in its environment. For instance, you could open a door and slip out without notice, but if you opened a door and let in allies that the target can detect, it would note the arrival of those allies.</p>
                <p class="indent">You can remove a hand-sized, unattended object from the target’s presence without risking notice, but moving a larger object or an attended object risks ending the power. If you take an action that creates a sustained and obvious change in the target’s environment, such as attacking another creature or moving a large or attended object the target can sense, the creature makes a new saving throw. An ally of your target that can sense you can alert it to your presence during its turn, granting your target a new saving throw.</p>
                <p class="indent">If you attack the target, the effect ends.</p>
                <p class="indent">You can use your Cloud Mind feature once per long rest. When you reach 13th level, you gain an additional use (two uses), and again at 17th level (three uses). You can also expend 4 power points to manifest this feature if you run out of uses.</p>
                <p class="indent">Starting at 17th level, you can use your Cloud Mind feature against each creature within range that you can see. Each creature must make a Wisdom saving throw.</p>
            </description>
            <sheet action="Action" usage="{{cloud-mind:uses}}/Long Rest">
                <description>One creature within 30 feet of you that can see must make a Wisdom saving throw (DC {{spellcasting:dc:int}}) or be unable to detect you or be aware of your presence. You can maintain this for {{level:rogue}} minutes.</description>
                <description level="17">Each creature you identify within 30 feet of you that can see must make a Wisdom saving throw (DC {{spellcasting:dc:int}}) or be unable to detect you or be aware of your presence. You can maintain this for {{level:rogue}} minutes.</description>
            </sheet>
            <rules>
                <stat name="cloud-mind:uses" value="1" level="9" />
                <stat name="cloud-mind:uses" value="1" level="13" />
                <stat name="cloud-mind:uses" value="1" level="17" />
            </rules>
        </element>
        <element name="Psionic Ambush" type="Archetype Feature" source="Therin Creative’s Psionic Rules Set" id="ID_TC_PRS_ARCHETYPE_FEATURE_SHADOWMIND_PSIONIC_AMBUSH">
            <description>
                <p>Starting at 13th level, if you are hidden from a creature when you manifest a power or use your Cloud Mind feature on it, the creature has disadvantage on its saving throw against that power this turn.</p>
            </description>
            <sheet>
                <description>If you are hidden from a creature when you manifest a power or use your Cloud Mind feature on it, the creature has disadvantage on its saving throw against that power this turn.</description>
            </sheet>
        </element>
        <element name="Mind Stab" type="Archetype Feature" source="Therin Creative’s Psionic Rules Set" id="ID_TC_PRS_ARCHETYPE_FEATURE_SHADOWMIND_MIND_STAB">
            <description>
                <p>Starting at 17th level, you can remove your presence from a creature’s mind when you attack it. When you deal sneak attack damage to a creature, you may take a bonus action to manifest your Cloud Mind feature against it.</p>
            </description>
            <sheet>
                <description>When you deal sneak attack damage to a creature, you may take a bonus action to manifest your Cloud Mind feature against it.</description>
            </sheet>
        </element>

 <!-- Shadowmind Powers -->
    <append id="ID_TC_PRS_PSIONIC_POWER_APOPSI">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_CHAMELEON">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_CONTROL_LIGHT">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_DISLOCATION">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_EGO_WHIP">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_EXTRASENSORY_PERCEPTION">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_GLIMMER">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_HARMONICS">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_HYPERCOGNITION">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_ID_INSINUATION">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_MENTAL_BARRIER">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_MIND_PROBE">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_MIND_SPIKE">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_MINDLINK">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_MISLEAD">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_PRECOGNITION">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_PSYCHIC_CRUSH">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_PSYCHIC_DOMINATION">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_PUPPETRY">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_REMOTE_SIGHT">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_SPEED_OF_THOUGHT">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_SPIRIT_WARD">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_TELEKINETIC_FIGHT">
        <supports>TC Shadowmind</supports>
    </append>
    <append id="ID_TC_PRS_PSIONIC_POWER_TELEMPATHIC_PROJECTION">
        <supports>TC Shadowmind</supports>
    </append>
</elements>