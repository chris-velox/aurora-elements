<?xml version="1.0" encoding="utf-8" ?>
<elements>
    <info>
        <name>Mage Knight Martial Archetype</name>
        <author url="https://www.gmbinder.com/profile/fungal%20brews">Fungal Brews</author>
        <update version="0.0.2">
            <file name="fighter-mage-knight.xml" url="https://raw.githubusercontent.com/chris-velox/aurora-elements/master/x-the-elder/compendia/the-warriors-codex/fighter-mage-knight.xml" />
        </update>
    </info>
    
    <element name="Mage Knight" type="Archetype" source="The Warrior’s Codex" id="ID_FUBR_TWC_ARCHETYPE_FIGHTER_MAGE_KNIGHT">
        <supports>Martial Archetype</supports>
        <description>
            <p>Masters of battlefield magic, Mage Knights protect themselves and devastate their enemies while retaining the mastery of combat common to all fighters. Keeping a small, carefully-curated list of memorized spells, they blend the arcane and mundane as one.</p>
            <p class="indent"></p>
            <div element="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_SPELLCASTING" />
            <div element="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_BONDED_WEAPON" />
            <div element="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_WAR_MAGIC" />
            <div element="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_ELDRITCH_STRIKE" />
            <div element="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_ARCANE_CHARGE" />
            <div element="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_BATTLEMAGE" />
        </description>
        <sheet display="false">
            <description></description>
        </sheet>
        <rules>
            <grant type="Archetype Feature" id="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_SPELLCASTING" level="3" />
            <grant type="Archetype Feature" id="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_BONDED_WEAPON" level="3" />
            <grant type="Archetype Feature" id="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_WAR_MAGIC" level="7" />
            <grant type="Archetype Feature" id="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_ELDRITCH_STRIKE" level="10" />
            <grant type="Archetype Feature" id="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_ARCANE_CHARGE" level="15" />
            <grant type="Archetype Feature" id="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_BATTLEMAGE" level="18" />
        </rules>
    </element>
    <element name="Spellcasting" type="Archetype Feature" source="The Warrior’s Codex" id="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_SPELLCASTING">
        <description>
            <p>When you reach 3rd level, you augment your martial prowess with the ability to cast spells. See chapter 10 for the general rules of spellcasting and chapter 11 for the wizard spell list.</p>
            <h5>CANTRIPS</h5>
            <p>You learn two cantrips of your choice from the wizard spell list. You learn an additional wizard cantrip of your choice at 10th level.</p>
            <h5>SPELL SLOTS</h5>
            <p>The Eldritch Knight Spellcasting table shows how many spell slots you have to cast your wizard spells of 1st level and higher. To cast one of these spells, you must expend a slot of the spell’s level or higher. You regain all expended spell slots when you finish a long rest. For example, if you know the 1st-level spell shield and have a 1st-level and a 2nd-level spell slot available, you can cast shield using either slot.</p>
            <h5>SPELLS KNOWN OF 1ST-LEVEL AND HIGHER</h5>
            <p>You know three 1st-level wizard spells of your choice, two of which you must choose from the abjuration and evocation spells on the wizard spell list. The Spells Known column of the Eldritch Knight Spellcasting table shows when you learn more wizard spells of 1st level or higher. Each of these spells must be an abjuration or evocation spell of your choice, and must be of a level for which you have spell slots. For instance, when you reach 7th level in this class, you can learn one new spell of 1st or 2nd level.</p>
            <p class="indent">The spells you learn at 8th, 14th, and 20th level can come from any school of magic.</p>
            <p class="indent">Whenever you gain a level in this class, you can replace one of the wizard spells you know with another spell of your choice from the wizard spell list. The new spell must be of a level for which you have spell slots, and it must be an abjuration or evocation spell, unless you’re replacing the spell you gained at 3rd, 8th, 14th, or 20th level from any school of magic.</p>
            <h5>SPELLCASTING ABILITY</h5>
            <p>Intelligence is your spellcasting ability for your wizard spells, since you learn your spells through study and memorization. You use your Intelligence whenever a spell refers to your spellcasting ability. In addition, you use your Intelligence modifier when setting the saving throw DC for a wizard spell you cast and when making an attack roll with one.</p>
            <center>
                <p><strong>Spell Save DC</strong> = 8 + your proficiency bonus + your Intelligence modifier</p>
                <p><strong>Spell attack modifier</strong> = your proficiency bonus + your Intelligence modifier</p>
            </center>
            <h5>SPELLCASTING FOCUS</h5>
            <p>You can use an arcane focus as a spellcasting focus for your wizard spells.</p>
			<h5 class="caption">MAGE KNIGHT SPELLCASTING</h5>
			<table class="class-features">
				<thead>
					<tr><td class="col-10">Fighter Level</td><td class="col-10">Cantrips Known</td><td class="col-10">Spells Known</td><td>1st</td><td>2nd</td><td>3rd</td><td>4th</td></tr>
				</thead>
				<tr><td> 3rd</td><td>3</td><td> 3</td><td>2</td><td>—</td><td>—</td><td>—</td></tr>
				<tr><td> 4th</td><td>3</td><td> 4</td><td>3</td><td>—</td><td>—</td><td>—</td></tr>
				<tr><td> 5th</td><td>3</td><td> 4</td><td>3</td><td>—</td><td>—</td><td>—</td></tr>
				<tr><td> 6th</td><td>3</td><td> 4</td><td>3</td><td>—</td><td>—</td><td>—</td></tr>
				<tr><td> 7th</td><td>3</td><td> 5</td><td>4</td><td>2</td><td>—</td><td>—</td></tr>
				<tr><td> 8th</td><td>3</td><td> 6</td><td>4</td><td>2</td><td>—</td><td>—</td></tr>
				<tr><td> 9th</td><td>3</td><td> 6</td><td>4</td><td>2</td><td>—</td><td>—</td></tr>
				<tr><td>10th</td><td>4</td><td> 7</td><td>4</td><td>3</td><td>—</td><td>—</td></tr>
				<tr><td>11th</td><td>4</td><td> 8</td><td>4</td><td>3</td><td>—</td><td>—</td></tr>
				<tr><td>12th</td><td>4</td><td> 8</td><td>4</td><td>3</td><td>—</td><td>—</td></tr>
				<tr><td>13th</td><td>4</td><td> 9</td><td>4</td><td>3</td><td>2</td><td>—</td></tr>
				<tr><td>14th</td><td>4</td><td>10</td><td>4</td><td>3</td><td>2</td><td>—</td></tr>
				<tr><td>15th</td><td>4</td><td>10</td><td>4</td><td>3</td><td>2</td><td>—</td></tr>
				<tr><td>16th</td><td>4</td><td>11</td><td>4</td><td>3</td><td>3</td><td>—</td></tr>
				<tr><td>17th</td><td>4</td><td>11</td><td>4</td><td>3</td><td>3</td><td>—</td></tr>
				<tr><td>18th</td><td>4</td><td>11</td><td>4</td><td>3</td><td>3</td><td>—</td></tr>
				<tr><td>19th</td><td>4</td><td>12</td><td>4</td><td>3</td><td>3</td><td>1</td></tr>
				<tr><td>20th</td><td>4</td><td>13</td><td>4</td><td>3</td><td>3</td><td>1</td></tr>
			</table>				
        </description>
        <setters>
            <set name="spellcaster">true</set>
            <set name="spellcastingAbility">Intelligence</set>
        </setters>
        <spellcasting name="Mage Knight" ability="Intelligence" prepare="false" allowReplace="true">
            <list>Wizard</list>
        </spellcasting>
        <sheet display="false">
            <description></description>
        </sheet>
        <rules>
            <select type="Spell" name="Cantrip (Mage Knight)" spellcasting="Mage Knight" supports="$(spellcasting:list),0" level="3" number="2" />
            <select type="Spell" name="Cantrip (Mage Knight)" spellcasting="Mage Knight" supports="$(spellcasting:list),0" level="10" number="1" />
            
            <stat name="mage knight:spellcasting:slots:1" value="2" level="3" />
            <stat name="mage knight:spellcasting:slots:1" value="1" level="4" />
            <stat name="mage knight:spellcasting:slots:1" value="1" level="7" />
            <stat name="mage knight:spellcasting:slots:2" value="2" level="7" />
            <stat name="mage knight:spellcasting:slots:2" value="1" level="10" />
            <stat name="mage knight:spellcasting:slots:3" value="2" level="13" />
            <stat name="mage knight:spellcasting:slots:3" value="1" level="16" />
            <stat name="mage knight:spellcasting:slots:4" value="1" level="19" />

            <select type="Spell" name="Spell (Mage Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" spellcasting="Mage Knight" number="3" level="3" />
            <select type="Spell" name="Spell (Mage Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" spellcasting="Mage Knight" number="1" level="4" />
            <select type="Spell" name="Spell (Mage Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" spellcasting="Mage Knight" number="1" level="7" />
            <select type="Spell" name="Spell (Mage Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" spellcasting="Mage Knight" number="1" level="8" />
            <select type="Spell" name="Spell (Mage Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" spellcasting="Mage Knight" number="1" level="10" />
            <select type="Spell" name="Spell (Mage Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" spellcasting="Mage Knight" number="1" level="11" />
            <select type="Spell" name="Spell (Mage Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" spellcasting="Mage Knight" number="1" level="13" />
            <select type="Spell" name="Spell (Mage Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" spellcasting="Mage Knight" number="1" level="14" />
            <select type="Spell" name="Spell (Mage Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" spellcasting="Mage Knight" number="1" level="16" />
            <select type="Spell" name="Spell (Mage Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" spellcasting="Mage Knight" number="1" level="19" />
            <select type="Spell" name="Spell (Mage Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" spellcasting="Mage Knight" number="1" level="20" />
            
        </rules>
    </element>
    <element name="Bonded Weapon" type="Archetype Feature" source="The Warrior’s Codex" id="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_BONDED_WEAPON">
        <description>
            <p>At 3rd level, you learn a ritual that creates a magical bond between yourself and one weapon. You perform the ritual over the course of 1 hour, which can be done during a short rest. The weapon must be within your reach throughout the ritual, at the conclusion of which you touch the weapon and forge the bond.</p>
            <p class="indent">Once you have bonded with a weapon, you can’t be disarmed of it unless you are incapacitated. If it is on the same plane of existence, you can summon it as a bonus action on your turn, causing it to teleport instantly to your hand. That weapon can also be used as a focus for casting spells. You can have up to two bonded weapons, but can summon only one at a time with your bonus action. If you attempt to bond with a third weapon, you must break the bond with one of the other two.</p>
            <p class="indent">When you cast a spell, you can focus it using your bonded weapon. Make a weapon attack roll instead of a spell attack roll or forcing a target to make a saving throw. If the attack hits, instead of dealing weapon damage, it deals all the effects of the spell to one creature. You cannot attack a creature outside the range of the spell. You can only use this feature to cast spells that target a single creature or object.</p>
        </description>
        <sheet>
            <description>Once you have bonded with a weapon, you can’t be disarmed of it unless you are incapacitated. If it is on the same plane of existence, you can summon it as a bonus action on your turn, causing it to teleport instantly to your hand. That weapon can also be used as a focus for casting spells. You can have up to two bonded weapons, but can summon only one at a time with your bonus action. When you cast a spell, you can focus it using your bonded weapon. Make a weapon attack roll instead of a spell attack roll or forcing a target to make a saving throw. If the attack hits, instead of dealing weapon damage, it deals all the effects of the spell to one creature. You cannot attack a creature outside the range of the spell. You can only use this feature to cast spells that target a single creature or object.</description>
        </sheet>
    </element>
    <element name="War Magic" type="Archetype Feature" source="The Warrior’s Codex" id="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_WAR_MAGIC">
        <description>
            <p>Beginning at 7th level, when you use your action to cast a cantrip, you can make one weapon attack as a bonus action.</p>
        </description>
        <sheet action="Bonus Action">
            <description>When you use your action to cast a cantrip, you can make one weapon attack.</description>
        </sheet>
    </element>
    <element name="Eldritch Strike" type="Archetype Feature" source="The Warrior’s Codex" id="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_ELDRITCH_STRIKE">
        <description>
            <p>Starting at 10th level, magic lingers on your bonded weapons. When you cast a spell of first level or higher, attacks with your bonded weapon deal an extra 1d6 damage of the spell’s type until the end of your next turn.</p>
        </description>
        <sheet>
            <description>When you cast a spell of first level or higher, attacks with your bonded weapon deal an extra 1d6 damage of the spell’s type until the end of your next turn.</description>
        </sheet>
    </element>
    <element name="Arcane Charge" type="Archetype Feature" source="The Warrior’s Codex" id="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_ARCANE_CHARGE">
        <description>
            <p>At 15th level, you gain the ability to teleport up to 30 feet to an unoccupied space you can see when you use your Action Surge. You can teleport before or after the additional action.</p>
        </description>
        <sheet>
            <description>You gain the ability to teleport up to 30 feet to an unoccupied space you can see when you use your Action Surge. You can teleport before or after the additional action.</description>
        </sheet>
    </element>
    <element name="Battlemage" type="Archetype Feature" source="The Warrior’s Codex" id="ID_FUBR_TWC_ARCHETYPE_FEATURE_MAGE_KNIGHT_BATTLEMAGE">
        <description>
            <p>Starting at 18th level, when you use your action to cast a spell of 1st level or higher, you can make two weapon attacks as a bonus action.</p>
        </description>
        <sheet action="Bonus Action">
            <description>When you use your action to cast a spell of 1st level or higher, you can make two weapon attacks.</description>
        </sheet>
    </element>
</elements>