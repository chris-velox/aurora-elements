<?xml version="1.0" encoding="utf-8" ?>
<elements>
    <info>
        <name>Arcane Knight Martial Archetype</name>
        <update version="0.0.2">
            <file name="fighter-arcane-knight.xml" url="https://raw.githubusercontent.com/chris-velox/aurora-elements/master/x-the-elder/compendia/gm-binder-devikyn/eldritch-arcana/fighter-arcane-knight.xml" />
        </update>
    </info>
    
    <element name="Arcane Knight" type="Archetype" source="Eldritch Arcana" id="ID_EA_ARCHETYPE_ARCANE_KNIGHT">
        <supports>Martial Archetype</supports>
        <description>
            <p>The archetypal Arcane Knight combines the martial mastery common to all fighters with a careful study of magic. Arcane Knights use magical techniques similar to those practiced by wizards. They focus their study on two of the eight schools of magic. These knights learn a comparatively small number of spells, committing them to memory instead of keeping them in a spellbook.</p>
            <p class="indent"></p>
            <div element="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_SPELLCASTING" />
            <div element="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_RESIDUAL_MAGIC" />
            <div element="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_WAR_MAGIC" />
            <div element="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_ARCANE_CHARGE" />
            <div element="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_RIFT_STRIKE" />
            <div element="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_DEFLECTIVE_MANTLE" />
        </description>
        <sheet display="false">
            <description></description>
        </sheet>
        <rules>
            <grant type="Archetype Feature" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_SPELLCASTING" level="3" />
            <grant type="Archetype Feature" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_RESIDUAL_MAGIC" level="3" />
            <grant type="Archetype Feature" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_WAR_MAGIC" level="7" />
            <grant type="Archetype Feature" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_ARCANE_CHARGE" level="10" />
            <grant type="Archetype Feature" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_RIFT_STRIKE" level="1" />
            <grant type="Archetype Feature" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_DEFLECTIVE_MANTLE" level="1" />
        </rules>
    </element>
    
    <element name="Spellcasting" type="Archetype Feature" source="Eldritch Arcana" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_SPELLCASTING">
        <description>
            <p>When you reach 3rd level, you augment your martial prowess with the ability to cast spells. See chapter 10 for the general rules of spellcasting and chapter 11 for the wizard spell list.</p>
            <h5>CANTRIPS</h5>
            <p>You learn two cantrips of your choice from the wizard spell list. You learn an additional wizard cantrip of your choice at 10th level.</p>
            <h5>SPELL SLOTS</h5>
            <p>The Arcane Knight Spellcasting table shows how many spell slots you have to cast your spells of 1st level and higher. To cast one of these spells, you must expend a slot of the spell’s level or higher. You regain all expended spell slots when you finish a long rest.</p>
            <p class="indent">For example, if you know the 1st-level spell shield and have a 1stlevel and a 2nd-level spell slot available, you can cast shield using either slot.</p>
            <h5>SPELLS KNOWN OF 1ST-LEVEL AND HIGHER</h5>
            <p>Choose two schools of magic (detailed in the Player's Handbook, Chapter 10: Spellcasting, page 203, The Schools of Magic sidebar) which become your arcane specialties. You know three 1st-level wizard spells of your choice, two of which must be spells of the same school as either of your arcane specialties.</p>
            <p class="indent">The Spells Known column of the Arcane Knight Spellcasting table shows when you learn more wizard spells of your choice of 1st level or higher. Each of these must be spells of the same school as either of your arcane specialties, and must be of a level for which you have spell slots. For instance, when you reach 7th level in this class, you can learn one new spell of 1st or 2nd level.</p>
            <p class="indent">The spells you learn at 8th, 14th, and 20th level can come from any school of magic.</p>
            <p class="indent">Whenever you gain a level in this class, you can replace one of the wizard spells you know with another spell of your choice from the wizard spell list. The new spell must be of a level for which you have spell slots, and it must be a spell of the same school as either of your arcane specialties, unless you’re replacing the spell you gained at 3rd, 8th, 14th, or 20th level from any school of magic.</p>
            <h5>SPELLCASTING ABILITY</h5>
            <p>Intelligence is your spellcasting ability for your wizard spells, since you learn your spells through study and memorization. You use your Intelligence whenever a spell refers to your spellcasting ability. In addition, you use your Intelligence modifier when setting the saving throw DC for a wizard spell you cast and when making an attack roll with one.</p>
            <center>
                <p><strong>Spell save DC</strong> = 8 + your proficiency bonus + your Intelligence modifier</p>
                <p><strong>Spell attack modifier</strong> = your proficiency bonus + your Intelligence modifier</p>
            </center>
			<h5 class="caption">ARCANE KNIGHT SPELLCASTING</h5>
			<table class="class-features">
				<thead>
					<tr><td class="col-10">Fighter Level</td><td class="col-10">Cantrips Known</td><td class="col-10">Spells Known</td><td>1st</td><td>2nd</td><td>3rd</td><td>4th</td></tr>
				</thead>
				<tr><td> 3rd</td><td>3</td><td> 3</td><td>2</td><td>—</td><td>—</td><td>—</td></tr>
				<tr><td> 4th</td><td>3</td><td> 4</td><td>3</td><td>—</td><td>—</td><td>—</td></tr>
				<tr><td> 5th</td><td>3</td><td> 4</td><td>3</td><td>—</td><td>—</td><td>—</td></tr>
				<tr><td> 6th</td><td>3</td><td> 4</td><td>3</td><td>—</td><td>—</td><td>—</td></tr>
				<tr><td> 7th</td><td>3</td><td> 5</td><td>4</td><td>2</td><td>—</td><td>—</td></tr>
				<tr><td> 8th</td><td>3</td><td> 6</td><td>4</td><td>2</td><td>—</td><td>—</td></tr>
				<tr><td> 9th</td><td>3</td><td> 6</td><td>4</td><td>2</td><td>—</td><td>—</td></tr>
				<tr><td>10th</td><td>4</td><td> 7</td><td>4</td><td>3</td><td>—</td><td>—</td></tr>
				<tr><td>11th</td><td>4</td><td> 8</td><td>4</td><td>3</td><td>—</td><td>—</td></tr>
				<tr><td>12th</td><td>4</td><td> 8</td><td>4</td><td>3</td><td>—</td><td>—</td></tr>
				<tr><td>13th</td><td>4</td><td> 9</td><td>4</td><td>3</td><td>2</td><td>—</td></tr>
				<tr><td>14th</td><td>4</td><td>10</td><td>4</td><td>3</td><td>2</td><td>—</td></tr>
				<tr><td>15th</td><td>4</td><td>10</td><td>4</td><td>3</td><td>2</td><td>—</td></tr>
				<tr><td>16th</td><td>4</td><td>11</td><td>4</td><td>3</td><td>3</td><td>—</td></tr>
				<tr><td>17th</td><td>4</td><td>11</td><td>4</td><td>3</td><td>3</td><td>—</td></tr>
				<tr><td>18th</td><td>4</td><td>11</td><td>4</td><td>3</td><td>3</td><td>—</td></tr>
				<tr><td>19th</td><td>4</td><td>12</td><td>4</td><td>3</td><td>3</td><td>1</td></tr>
				<tr><td>20th</td><td>4</td><td>13</td><td>4</td><td>3</td><td>3</td><td>1</td></tr>
			</table>				
        </description>
        <setters>
            <set name="spellcaster">true</set>
            <set name="spellcastingAbility">Intelligence</set>
            <set name="spellcastingClass">Arcane Knight</set>
        </setters>
        <spellcasting name="Arcane Knight" ability="Intelligence" prepare="false">
            <list>Arcane Knight</list>
        </spellcasting>
        <sheet>
            <description></description>
        </sheet>
        <rules>
            <select type="Archetype Feature" name="School of Magic (Arcane Knight)" supports="Arcane Knight School" number="2" />
        
            <stat name="arcane knight:spellcasting:slots:1" value="2" level="3" />
            <stat name="arcane knight:spellcasting:slots:1" value="1" level="3" />
            <stat name="arcane knight:spellcasting:slots:1" value="1" level="7" />
            <stat name="arcane knight:spellcasting:slots:2" value="2" level="7" />
            <stat name="arcane knight:spellcasting:slots:2" value="1" level="10" />
            <stat name="arcane knight:spellcasting:slots:3" value="2" level="13" />
            <stat name="arcane knight:spellcasting:slots:3" value="1" level="16" />
            <stat name="arcane knight:spellcasting:slots:4" value="1" level="19" />

            <select type="Spell" name="Cantrip (Arcane Knight)" supports="$(spellcasting:list),0" level="1" number="4" spellcasting="Arcane Knight" />
            <select type="Spell" name="Cantrip (Arcane Knight)" supports="$(spellcasting:list),0" level="10" spellcasting="Arcane Knight"/>

            <select type="Spell" name="Spell (Arcane Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" level="3" number="3" spellcasting="Arcane Knight"/>
            <select type="Spell" name="Spell (Arcane Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" level="4" spellcasting="Arcane Knight"/>
            <select type="Spell" name="Spell (Arcane Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" level="7" spellcasting="Arcane Knight"/>
            <select type="Spell" name="Spell (Arcane Knight)" supports="Wizard,$(spellcasting:slots)" level="8" spellcasting="Arcane Knight"/>
            <select type="Spell" name="Spell (Arcane Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" level="10" spellcasting="Arcane Knight"/>
            <select type="Spell" name="Spell (Arcane Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" level="11" spellcasting="Arcane Knight"/>
            <select type="Spell" name="Spell (Arcane Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" level="13" spellcasting="Arcane Knight"/>
            <select type="Spell" name="Spell (Arcane Knight)" supports="Wizard,$(spellcasting:slots)" level="14" spellcasting="Arcane Knight"/>
            <select type="Spell" name="Spell (Arcane Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" level="16" spellcasting="Arcane Knight"/>
            <select type="Spell" name="Spell (Arcane Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" level="19" spellcasting="Arcane Knight"/>
            <select type="Spell" name="Spell (Arcane Knight)" supports="Wizard,$(spellcasting:slots)" level="20" spellcasting="Arcane Knight"/>

        </rules>
    </element>

    <element name="Residual Magic" type="Archetype Feature" source="Eldritch Arcana" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_RESIDUAL_MAGIC">
        <description>
            <p>At 3rd level, you can harness the shed magic from your spells to transform your attacks. When you cast a spell that deals damage on your turn, you can choose one of the damage types that was dealt by the spell. Until the end of your next turn, you can cause your weapon attacks to deal damage of the chosen type, instead of their normal damage type.</p>
        </description>
        <sheet>
            <description>When you cast a spell that deals damage on your turn, you can choose one of the damage types that was dealt by the spell. Until the end of your next turn, you can cause your weapon attacks to deal damage of the chosen type, instead of their normal damage type.</description>
        </sheet>
    </element>
    <element name="War Magic" type="Archetype Feature" source="Eldritch Arcana" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_WAR_MAGIC">
        <description>
            <p>At 7th level, once on each of your turns when you take the Attack action, you can forfeit half of the attacks (rounded up) to cast one cantrip with a casting time of 1 action as part of the same action. You can add a bonus equal to your Intelligence modifier to the damage of a cantrip that you cast it in this way.</p>
        </description>
        <sheet>
            <description>At 7th level, once on each of your turns when you take the Attack action, you can forfeit half of the attacks (rounded up) to cast one cantrip with a casting time of 1 action as part of the same action. You can add a bonus of {{intelligence:modifier}} to the damage of a cantrip that you cast it in this way.</description>
        </sheet>
    </element>
    <element name="Arcane Charge" type="Archetype Feature" source="Eldritch Arcana" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_ARCANE_CHARGE">
        <description>
            <p>At 10th level, you gain the ability to teleport up to 30 feet to an unoccupied space you can see when you use your Action Surge. You can teleport before or after the additional action.</p>
        </description>
        <sheet>
            <description>You can teleport up to 30 feet to an unoccupied space you can see when you use your Action Surge. You can teleport before or after the additional action.</description>
        </sheet>
    </element>
    <element name="Rift Strike" type="Archetype Feature" source="Eldritch Arcana" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_RIFT_STRIKE">
        <description>
            <p>At 15th level, you learn how to make your weapon strikes undercut a creature’s resistance to your spells. When you hit a creature with a weapon attack, that creature has disadvantage on the next saving throw it makes against the next spell you cast before the end of your next turn.</p>
        </description>
        <sheet>
            <description>When you hit a creature with a weapon attack, that creature has disadvantage on the next saving throw it makes against the next spell you cast before the end of your next turn.</description>
        </sheet>
    </element>
    <element name="Deflective Mantle" type="Archetype Feature" source="Eldritch Arcana" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_DEFLECTIVE_MANTLE">
        <description>
            <p>At 18th level, you weave protective magics around a creature, increasing its ability to deflect blows. As an action, you touch a creature and cause any damage that creature takes to be reduced by your Intelligence modifier unless the damage type is psychic. The effect lasts for 1 minute.</p>
            <p class="indent">Once you have used this feature, you can’t use it again until you finish a short or long rest.</p>
        </description>
        <sheet usage="1/Short Rest" action="Action">
            <description>You touch a creature and cause any damage that creature takes to be reduced by {{intelligence:modifier}} unless the damage type is psychic. The effect lasts for 1 minute.</description>
        </sheet>
    </element>

    <!-- School of Magic Features -->
    <element name="Abjuration" type="Archetype Feature" source="Eldritch Arcana" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_ABJURATION">
        <supports>Arcane Knight School</supports>
        <description>
            <p></p>
        </description>
        <sheet display="false">
            <description></description>
        </sheet>
        <spellcasting name="Arcane Knight" extend="true">
            <extend>Wizard,Abjuration</extend>
        </spellcasting>
    </element>
    <element name="Conjuration" type="Archetype Feature" source="Eldritch Arcana" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_CONJURATION">
        <supports>Arcane Knight School</supports>
        <description>
            <p></p>
        </description>
        <sheet display="false">
            <description></description>
        </sheet>
        <spellcasting name="Arcane Knight" extend="true">
            <extend>Wizard,Conjuration</extend>
        </spellcasting>
    </element>
    <element name="Divination" type="Archetype Feature" source="Eldritch Arcana" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_DIVINATION">
        <supports>Arcane Knight School</supports>
        <description>
            <p></p>
        </description>
        <sheet display="false">
            <description></description>
        </sheet>
        <spellcasting name="Arcane Knight" extend="true">
            <extend>Wizard,Divination</extend>
        </spellcasting>
    </element>
    <element name="Enchantment" type="Archetype Feature" source="Eldritch Arcana" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_ENCHANTMENT">
        <supports>Arcane Knight School</supports>
        <description>
            <p></p>
        </description>
        <sheet display="false">
            <description></description>
        </sheet>
        <spellcasting name="Arcane Knight" extend="true">
            <extend>Wizard,Enchantment</extend>
        </spellcasting>
    </element>
    <element name="Evocation" type="Archetype Feature" source="Eldritch Arcana" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_EVOCATION">
        <supports>Arcane Knight School</supports>
        <description>
            <p></p>
        </description>
        <sheet display="false">
            <description></description>
        </sheet>
        <spellcasting name="Arcane Knight" extend="true">
            <extend>Wizard,Evocation</extend>
        </spellcasting>
    </element>
    <element name="Illusion" type="Archetype Feature" source="Eldritch Arcana" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_ILLUSION">
        <supports>Arcane Knight School</supports>
        <description>
            <p></p>
        </description>
        <sheet display="false">
            <description></description>
        </sheet>
        <spellcasting name="Arcane Knight" extend="true">
            <extend>Wizard,Illusion</extend>
        </spellcasting>
    </element>
    <element name="Necromancy" type="Archetype Feature" source="Eldritch Arcana" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_NECROMANCY">
        <supports>Arcane Knight School</supports>
        <description>
            <p></p>
        </description>
        <sheet display="false">
            <description></description>
        </sheet>
        <spellcasting name="Arcane Knight" extend="true">
            <extend>Wizard,Necromancy</extend>
        </spellcasting>
    </element>
    <element name="Transmutation" type="Archetype Feature" source="Eldritch Arcana" id="ID_EA_ARCHETYPE_FEATURE_ARCANE_KNIGHT_TRANSMUTATION">
        <supports>Arcane Knight School</supports>
        <description>
            <p></p>
        </description>
        <sheet display="false">
            <description></description>
        </sheet>
        <spellcasting name="Arcane Knight" extend="true">
            <extend>Wizard,Transmutation</extend>
        </spellcasting>
    </element>
</elements>